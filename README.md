# Event Bus



## 先舉個事件的例子 🌰

A: 喊了 `木頭人` 
B: 聽到 `木頭人` 時就 `不動`


* 用 jQuery 寫
```
  $('#a').trigger('木頭人');

  $('#b').on('木頭人', function(){
    console.log('不動')
  })
```

# Event Bus 事件匯流排

```
Bus: 我來幫各位進行文字轉播

Bus.$emit('A 喊了木頭人')

Bus.$on('A 喊了木頭人', ()=>{
  console.log('B 就不動')
})
```

* Bus 可以不同頁面、元件來處理各種事件

優點: 當事件很多時，可以集中管理各種事件，個元件頁面都可以透過 Bus 呼叫及監聽事件

缺點: 很難一目了然的知道 Bus 身上究竟綁了哪些事件，因此可能要自己額外下實作相關功能或用文件列出

* 透過 Vue-devtools 可以追蹤當前行為所觸發的事件

# 其他

事件相關的雷點:

重複監聽事件: 有可能讓同一個行為執行多次

例子1 🌰

```
Bus.$on('A 喊了木頭人', ()=>{
  console.log('B 就不動')
})

Bus.$on('A 喊了木頭人', ()=>{
  console.log('B 就不動')
})
```

Bus 就監聽了兩次 `A 喊了木頭人` 這個事件
因此 console.log 就會印出兩次 `B 就不動`

例子2 🌰
在 Vue 元件在首頁監聽了一個事件，但切換到其他頁面時，該事件沒被銷毀，當你再回到首頁時，又會監聽一次同樣的事件